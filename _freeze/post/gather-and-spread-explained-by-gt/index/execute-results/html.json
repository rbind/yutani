{
  "hash": "a44ad039114b08f8caef2da78850e3fb",
  "result": {
    "markdown": "---\ntitle: gather() and spread() Explained By gt\nauthor: Hiroaki Yutani\ndate: '2019-01-24'\ncategories:\n  - tidyr\n  - tidy data\n  - gt\nformat:\n  html:\n    toc: true\n    toc-title: \"Contents\"\n    toc-location: left\n---\n\n```{=html}\n<style>\ntable {\n  width: 50%;\n  font-size: 80%;\n}\n</style>\n```\n\nThis is episode 0 of my long adventure to [multi-spread](https://github.com/tidyverse/tidyr/issues/149) and [multi-gather](https://github.com/tidyverse/tidyr/issues/150) (this is my homework I got at [the tidyverse developer day](https://www.tidyverse.org/articles/2018/11/tidyverse-developer-day-2019/)...). This post might seem to introduce the different semantics from the current tidyr's one, but it's probably just because my idea is still vague. So, I really appreciate any feedbacks!\n\n## tl;dr\n\nI now think `gather()` and `spread()` are about\n\n1.  grouping and\n2.  `enframe()`ing and `deframe()`ing within each group\n\nDo you get what I mean? Let me explain step by step.\n\n## What does gt teach us?\n\nA while ago, [gt package](https://gt.rstudio.com/), [Richard Iannone](https://twitter.com/riannone)'s work-in-progress great work, was made public.\n\ngt package is wonderful, especially in that it makes us rethink about the possible semantics of columns. I mean, not all columns are equal. No, I don't say anything new; this is what you already know with `spread()` and `gather()`.\n\n### `spread()`ed data explained\n\nTake a look at this example data, a simpler version of the one in `?gather`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tibble)\nlibrary(gt)\n\nset.seed(1)\n# example in ?gather\nstocks <- tibble(\n  time = as.Date('2009-01-01') + 0:2,\n  X = rnorm(3, 0, 1),\n  Y = rnorm(3, 0, 2),\n  Z = rnorm(3, 0, 4)\n)\n\nstocks\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 4\n  time            X      Y     Z\n  <date>      <dbl>  <dbl> <dbl>\n1 2009-01-01 -0.626  3.19   1.95\n2 2009-01-02  0.184  0.659  2.95\n3 2009-01-03 -0.836 -1.64   2.30\n```\n:::\n:::\n\n\nHere, `X`, `Y`, and `Z` are the prices of stock X, Y, and Z. Of course, we can `gather()` the columns as this is the very example for this, but, we also can *bundle* these columns using `tab_spanner()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngt(stocks) %>%\n  tab_spanner(\"price\", c(X, Y, Z))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"jgioueiyne\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#jgioueiyne .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#jgioueiyne .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#jgioueiyne .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#jgioueiyne .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#jgioueiyne .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#jgioueiyne .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#jgioueiyne .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#jgioueiyne .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jgioueiyne .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jgioueiyne .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#jgioueiyne .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#jgioueiyne .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#jgioueiyne .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgioueiyne .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#jgioueiyne .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#jgioueiyne .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgioueiyne .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#jgioueiyne .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgioueiyne .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#jgioueiyne .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgioueiyne .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jgioueiyne .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgioueiyne .gt_left {\n  text-align: left;\n}\n\n#jgioueiyne .gt_center {\n  text-align: center;\n}\n\n#jgioueiyne .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#jgioueiyne .gt_font_normal {\n  font-weight: normal;\n}\n\n#jgioueiyne .gt_font_bold {\n  font-weight: bold;\n}\n\n#jgioueiyne .gt_font_italic {\n  font-style: italic;\n}\n\n#jgioueiyne .gt_super {\n  font-size: 65%;\n}\n\n#jgioueiyne .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#jgioueiyne .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#jgioueiyne .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#jgioueiyne .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#jgioueiyne .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#jgioueiyne .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\">time</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\">\n        <span class=\"gt_column_spanner\">price</span>\n      </th>\n    </tr>\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">X</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Z</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">2009-01-01</td>\n<td class=\"gt_row gt_right\">-0.6264538</td>\n<td class=\"gt_row gt_right\">3.1905616</td>\n<td class=\"gt_row gt_right\">1.949716</td></tr>\n    <tr><td class=\"gt_row gt_left\">2009-01-02</td>\n<td class=\"gt_row gt_right\">0.1836433</td>\n<td class=\"gt_row gt_right\">0.6590155</td>\n<td class=\"gt_row gt_right\">2.953299</td></tr>\n    <tr><td class=\"gt_row gt_left\">2009-01-03</td>\n<td class=\"gt_row gt_right\">-0.8356286</td>\n<td class=\"gt_row gt_right\">-1.6409368</td>\n<td class=\"gt_row gt_right\">2.303125</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nYet another option is to specify `groupname_col`. We roughly think each row is a group and `time` is the grouping variable here:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngt(stocks, groupname_col = \"time\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ebjyloatcf\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ebjyloatcf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ebjyloatcf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ebjyloatcf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ebjyloatcf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ebjyloatcf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ebjyloatcf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ebjyloatcf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ebjyloatcf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ebjyloatcf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ebjyloatcf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ebjyloatcf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ebjyloatcf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ebjyloatcf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebjyloatcf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ebjyloatcf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ebjyloatcf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebjyloatcf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ebjyloatcf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebjyloatcf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ebjyloatcf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebjyloatcf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebjyloatcf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebjyloatcf .gt_left {\n  text-align: left;\n}\n\n#ebjyloatcf .gt_center {\n  text-align: center;\n}\n\n#ebjyloatcf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ebjyloatcf .gt_font_normal {\n  font-weight: normal;\n}\n\n#ebjyloatcf .gt_font_bold {\n  font-weight: bold;\n}\n\n#ebjyloatcf .gt_font_italic {\n  font-style: italic;\n}\n\n#ebjyloatcf .gt_super {\n  font-size: 65%;\n}\n\n#ebjyloatcf .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#ebjyloatcf .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#ebjyloatcf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ebjyloatcf .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#ebjyloatcf .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#ebjyloatcf .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">X</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Z</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"3\" class=\"gt_group_heading\">2009-01-01</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_right\">-0.6264538</td>\n<td class=\"gt_row gt_right\">3.1905616</td>\n<td class=\"gt_row gt_right\">1.949716</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"3\" class=\"gt_group_heading\">2009-01-02</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_right\">0.1836433</td>\n<td class=\"gt_row gt_right\">0.6590155</td>\n<td class=\"gt_row gt_right\">2.953299</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"3\" class=\"gt_group_heading\">2009-01-03</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_right\">-0.8356286</td>\n<td class=\"gt_row gt_right\">-1.6409368</td>\n<td class=\"gt_row gt_right\">2.303125</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n### `gather()`ed data explained\n\nLet's see the gathered version next. Here's the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstocksm <- stocks %>%\n  tidyr::gather(\"name\", \"value\", X:Z)\n\nstocksm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 9 × 3\n  time       name   value\n  <date>     <chr>  <dbl>\n1 2009-01-01 X     -0.626\n2 2009-01-02 X      0.184\n3 2009-01-03 X     -0.836\n4 2009-01-01 Y      3.19 \n5 2009-01-02 Y      0.659\n6 2009-01-03 Y     -1.64 \n7 2009-01-01 Z      1.95 \n8 2009-01-02 Z      2.95 \n9 2009-01-03 Z      2.30 \n```\n:::\n:::\n\n\nThis can be represented in a similar way. This time, a group doesn't consist of a single row, but the rows with the same grouping values. Accordingly, the grouping is the same as above.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstocksm %>%\n  gt(groupname_col = \"time\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"jjfottzlyw\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#jjfottzlyw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#jjfottzlyw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#jjfottzlyw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#jjfottzlyw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#jjfottzlyw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#jjfottzlyw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#jjfottzlyw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#jjfottzlyw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jjfottzlyw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jjfottzlyw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#jjfottzlyw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#jjfottzlyw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#jjfottzlyw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jjfottzlyw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#jjfottzlyw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#jjfottzlyw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jjfottzlyw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#jjfottzlyw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jjfottzlyw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#jjfottzlyw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jjfottzlyw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jjfottzlyw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jjfottzlyw .gt_left {\n  text-align: left;\n}\n\n#jjfottzlyw .gt_center {\n  text-align: center;\n}\n\n#jjfottzlyw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#jjfottzlyw .gt_font_normal {\n  font-weight: normal;\n}\n\n#jjfottzlyw .gt_font_bold {\n  font-weight: bold;\n}\n\n#jjfottzlyw .gt_font_italic {\n  font-style: italic;\n}\n\n#jjfottzlyw .gt_super {\n  font-size: 65%;\n}\n\n#jjfottzlyw .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#jjfottzlyw .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#jjfottzlyw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#jjfottzlyw .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#jjfottzlyw .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#jjfottzlyw .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"2\" class=\"gt_group_heading\">2009-01-01</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_left\">X</td>\n<td class=\"gt_row gt_right\">-0.6264538</td></tr>\n    <tr><td class=\"gt_row gt_left\">Y</td>\n<td class=\"gt_row gt_right\">3.1905616</td></tr>\n    <tr><td class=\"gt_row gt_left\">Z</td>\n<td class=\"gt_row gt_right\">1.9497162</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"2\" class=\"gt_group_heading\">2009-01-02</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_left\">X</td>\n<td class=\"gt_row gt_right\">0.1836433</td></tr>\n    <tr><td class=\"gt_row gt_left\">Y</td>\n<td class=\"gt_row gt_right\">0.6590155</td></tr>\n    <tr><td class=\"gt_row gt_left\">Z</td>\n<td class=\"gt_row gt_right\">2.9532988</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <td colspan=\"2\" class=\"gt_group_heading\">2009-01-03</td>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td class=\"gt_row gt_left\">X</td>\n<td class=\"gt_row gt_right\">-0.8356286</td></tr>\n    <tr><td class=\"gt_row gt_left\">Y</td>\n<td class=\"gt_row gt_right\">-1.6409368</td></tr>\n    <tr><td class=\"gt_row gt_left\">Z</td>\n<td class=\"gt_row gt_right\">2.3031254</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nYou can see the only difference is the rotation. So, theoretically, this can be implemented as grouping + rotating.\n\n## Do it yourself by `enframe()` and `deframe()`\n\nBefore entering into the implementations, I explain two tibble's functions, `enframe()` and `deframe()` briefly. They can convert a vector to/from a two-column data.frame.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tibble)\n\nx <- 1:3\nnames(x) <- c(\"foo\", \"bar\", \"baz\")\n\nenframe(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  name  value\n  <chr> <int>\n1 foo       1\n2 bar       2\n3 baz       3\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndeframe(enframe(x))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nfoo bar baz \n  1   2   3 \n```\n:::\n:::\n\n\n### `gather()`\n\nFirst, nest the data by `time`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <- dplyr::group_nest(stocks, time)\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time                     data\n  <date>     <list<tibble[,3]>>\n1 2009-01-01            [1 × 3]\n2 2009-01-02            [1 × 3]\n3 2009-01-03            [1 × 3]\n```\n:::\n:::\n\n\nThen, coerce the columns of the 1-row data.frames to vectors. (In practice, we should check if the elements are all coercible.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd$data <- purrr::map(d$data, ~ vctrs::vec_c(!!! .))\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time       data     \n  <date>     <list>   \n1 2009-01-01 <dbl [3]>\n2 2009-01-02 <dbl [3]>\n3 2009-01-03 <dbl [3]>\n```\n:::\n:::\n\n\nLastly, `enframe()` the vectors and unnest the whole data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd$data <- purrr::map(d$data, enframe)\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time       data            \n  <date>     <list>          \n1 2009-01-01 <tibble [3 × 2]>\n2 2009-01-02 <tibble [3 × 2]>\n3 2009-01-03 <tibble [3 × 2]>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntidyr::unnest(d)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c(data)`\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 9 × 3\n  time       name   value\n  <date>     <chr>  <dbl>\n1 2009-01-01 X     -0.626\n2 2009-01-01 Y      3.19 \n3 2009-01-01 Z      1.95 \n4 2009-01-02 X      0.184\n5 2009-01-02 Y      0.659\n6 2009-01-02 Z      2.95 \n7 2009-01-03 X     -0.836\n8 2009-01-03 Y     -1.64 \n9 2009-01-03 Z      2.30 \n```\n:::\n:::\n\n\nDone.\n\n### `spread()`\n\nFirst step is the same as `gather()`. Just nest the data by `time`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <- dplyr::group_nest(stocksm, time)\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time                     data\n  <date>     <list<tibble[,2]>>\n1 2009-01-01            [3 × 2]\n2 2009-01-02            [3 × 2]\n3 2009-01-03            [3 × 2]\n```\n:::\n:::\n\n\nThen, `deframe()` the data.frames. (In practice, we have to fill the missing rows to ensure all data.frames have the same variables.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd$data <- purrr::map(d$data, deframe)\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time       data     \n  <date>     <list>   \n1 2009-01-01 <dbl [3]>\n2 2009-01-02 <dbl [3]>\n3 2009-01-03 <dbl [3]>\n```\n:::\n:::\n\n\nThen, convert the vectors to data.frames.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd$data <- purrr::map(d$data, ~ tibble::tibble(!!! .))\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  time       data            \n  <date>     <list>          \n1 2009-01-01 <tibble [1 × 3]>\n2 2009-01-02 <tibble [1 × 3]>\n3 2009-01-03 <tibble [1 × 3]>\n```\n:::\n:::\n\n\nLastly, unnest the whole data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidyr::unnest(d)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `cols` is now required when using unnest().\nPlease use `cols = c(data)`\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 4\n  time            X      Y     Z\n  <date>      <dbl>  <dbl> <dbl>\n1 2009-01-01 -0.626  3.19   1.95\n2 2009-01-02  0.184  0.659  2.95\n3 2009-01-03 -0.836 -1.64   2.30\n```\n:::\n:::\n\n\nDone.\n\n## What's next?\n\nI'm not sure... I roughly believe this can be extended to multi-gather and multi-spread (groups can have multiple vectors and data.frames), but I'm yet to see how different (or same) this is from the current tidyr's semantics. Again, any feedbacks are welcome!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}