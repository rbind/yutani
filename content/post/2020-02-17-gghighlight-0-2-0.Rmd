---
title: gghighlight 0.2.0
author: 'Hiroaki Yutani'
date: '2020-02-17'
slug: gghighlight-0-2-0
categories:
  - R
tags:
  - gghighlight
  - ggplot2
  - package
description: ''
---

gghighlight 0.2.0 is on CRAN a while ago. Though most of the development effort of this 1.5 year is about internal improvements, let me introduce some new features.

## `keep_scales`

```{r keep_scale}
library(gghighlight)
#> Loading required package: ggplot2

set.seed(1)

d <- data.frame(
  idx = c( 1, 1, 1, 2, 2, 2, 3, 3, 3),
  value = c( 1, 2, 3,10,11,12, 9,10,11),
  category = rep(c("a","b","c"), 3),
  cont_var = runif(9),
  stringsAsFactors = FALSE
)

ggplot(d, aes(x = idx, y = value, color = cont_var)) +
  geom_point() +
  scale_color_continuous()
```

## `unhighlighted_params`

`gghighlight()` now allows users to override the parameters of unhighlighted data via `unhighlighted_params`.
This idea was suggested by [@ClausWilke](https://twitter.com/ClausWilke/status/1014529225402003456).

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I *think* you could support a broader set of use cases if you allowed a list of aesthetics default values, like `bleach_aes = list(colour = &quot;grey40&quot;, fill =&quot;grey80&quot;, size = 0.2)`.</p>&mdash; Claus Wilke (@ClausWilke) <a href="https://twitter.com/ClausWilke/status/1014529225402003456?ref_src=twsrc%5Etfw">July 4, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

To illustrate the original motivation, let's use an example on [the ggridges' vignette](https://cran.r-project.org/web/packages/ggridges/vignettes/gallery.html).
gghighlight can highlight almost any Geoms, but it doesn't mean it can "unhighlight" arbitrary colour aesthetics automatically. In some cases, you need to unhighlight them manually. For example, `geom_density_ridges()` has `point_colour`.

```{r unhighlighted_params1}
library(ggplot2)
library(gghighlight)
library(ggridges)

p <- ggplot(Aus_athletes, aes(x = height, y = sport, color = sex, point_color = sex, fill = sex)) +
  geom_density_ridges(
    jittered_points = TRUE, scale = .95, rel_min_height = .01,
    point_shape = "|", point_size = 3, size = 0.25,
    position = position_points_jitter(height = 0)
  ) +
  scale_y_discrete(expand = c(0, 0)) +
  scale_x_continuous(expand = c(0, 0), name = "height [cm]") +
  scale_fill_manual(values = c("#D55E0050", "#0072B250"), labels = c("female", "male")) +
  scale_color_manual(values = c("#D55E00", "#0072B2"), guide = "none") +
  scale_discrete_manual("point_color", values = c("#D55E00", "#0072B2"), guide = "none") +
  coord_cartesian(clip = "off") +
  guides(fill = guide_legend(
    override.aes = list(
      fill = c("#D55E00A0", "#0072B2A0"),
      color = NA, point_color = NA)
    )
  ) +
  ggtitle("Height in Australian athletes") +
  theme_ridges(center = TRUE)

p + 
  gghighlight(sd(height) < 5.5)
```

You should notice that these vertical lines still have their colours.
To grey them out, we can specify `point_colour = "grey80"`^[Be careful, `point_color` doesn't work...] on `unhighlighted_params`.

```{r unghighlighted_params2}
p + 
  gghighlight(sd(height) < 5.5, 
              unhighlighted_params = list(point_colour = "grey80"))
```

